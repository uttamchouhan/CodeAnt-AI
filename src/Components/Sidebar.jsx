import React, { useEffect, useState } from "react";
import logo from "../assets/logo.png";
import chevrondown from "../assets/chevron-down.png";
import menubar from "../assets/menubar.png";
import closemenu from "../assets/close.png";

const menuItem = [
    {
        id: 1,
        menuName: "Repositories",
        icon: () => (
            <svg
                width="21"
                height="18"
                viewBox="0 0 21 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M19.9453 8.07275C20.2969 8.38916 20.332 8.9165 20.0508 9.26807C19.7344 9.61963 19.207 9.65479 18.8555 9.37354L18.0117 8.63525V15.1743C18.0117 16.7563 16.7461 17.9868 15.1992 17.9868H5.07422C3.49219 17.9868 2.26172 16.7563 2.26172 15.1743V8.63525L1.38281 9.37354C1.03125 9.65479 0.503906 9.61963 0.1875 9.26807C-0.09375 8.9165 -0.0585938 8.38916 0.292969 8.07275L9.57422 0.197754C9.89062 -0.0483398 10.3477 -0.0483398 10.6641 0.197754L19.9453 8.07275ZM5.07422 16.2993H6.76172V10.9556C6.76172 10.1821 7.35938 9.54932 8.16797 9.54932H12.1055C12.8789 9.54932 13.5117 10.1821 13.5117 10.9556V16.2993H15.1992C15.7969 16.2993 16.3242 15.8071 16.3242 15.1743V7.19385L10.1367 1.95557L3.94922 7.19385V15.1743C3.94922 15.8071 4.44141 16.2993 5.07422 16.2993ZM8.44922 16.2993H11.8242V11.2368H8.44922V16.2993Z"
                    fill={"black"}
                />
            </svg>
        ),
    },
    {
        id: 2,
        menuName: "AI Cod Review",
        icon: () => (
            <svg
                width="23"
                height="18"
                viewBox="0 0 23 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M14.5547 1.09441L9.49219 17.4069C9.35156 17.8288 8.89453 18.0749 8.4375 17.9343C8.01562 17.7936 7.76953 17.3366 7.91016 16.8796L12.9727 0.567069C13.1133 0.145194 13.5703 -0.1009 14.0273 0.039725C14.4492 0.18035 14.6953 0.637381 14.5547 1.09441ZM17.7188 4.15301L22.2188 8.37176C22.3945 8.51238 22.5 8.75848 22.5 8.96941C22.5 9.21551 22.3945 9.42644 22.2188 9.60223L17.7188 13.821C17.3672 14.1374 16.8398 14.1374 16.5234 13.7858C16.207 13.4343 16.207 12.9069 16.5586 12.5905L20.3906 8.96941L16.5586 5.38347C16.207 5.06707 16.207 4.53972 16.5234 4.18816C16.8398 3.8366 17.3672 3.8366 17.7188 4.15301ZM5.90625 5.38347L2.07422 8.96941L5.90625 12.5905C6.25781 12.9069 6.25781 13.4343 5.94141 13.7858C5.625 14.1374 5.09766 14.1374 4.74609 13.821L0.246094 9.60223C0.0703125 9.42644 0 9.21551 0 8.96941C0 8.75848 0.0703125 8.51238 0.246094 8.37176L4.74609 4.15301C5.09766 3.8366 5.625 3.8366 5.94141 4.18816C6.25781 4.53972 6.25781 5.06707 5.90625 5.38347Z"
                    fill="#414651"
                />
            </svg>
        ),
    },
    {
        id: 3,
        menuName: "Cloud Security",
        icon: () => (
            <svg
                width="23"
                height="16"
                viewBox="0 0 23 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M18 15.875H5.0625C2.25 15.875 0 13.625 0 10.8125C0 8.63281 1.40625 6.73438 3.375 6.06641V6.03125C3.375 2.79688 6.01172 0.125 9.28125 0.125C11.0391 0.125 12.6562 0.933594 13.7461 2.19922C14.2734 1.95312 14.8359 1.8125 15.4688 1.8125C17.7891 1.8125 19.6875 3.71094 19.6875 6.03125C19.6875 6.27734 19.6523 6.48828 19.6172 6.73438C21.3047 7.47266 22.5 9.16016 22.5 11.0938C22.5 13.6602 20.4961 15.7344 18 15.875ZM13.2891 4.23828L12.4453 3.28906C11.6719 2.41016 10.5469 1.8125 9.28125 1.8125C6.92578 1.8125 5.0625 3.71094 5.0625 6.03125V7.26172L3.90234 7.64844C2.60156 8.10547 1.6875 9.37109 1.6875 10.8125C1.6875 12.6758 3.16406 14.1875 5.0625 14.1875H17.8945C19.5117 14.1172 20.8125 12.7461 20.8125 11.0938C20.8125 9.82812 20.0391 8.73828 18.9492 8.28125L17.7539 7.75391L17.9648 6.45312C17.9648 6.3125 18 6.17188 18 6.03125C18 4.66016 16.8398 3.5 15.4688 3.5C15.082 3.5 14.7305 3.60547 14.4141 3.74609L13.2891 4.23828Z"
                    fill="#414651"
                />
            </svg>
        ),
    },
    {
        id: 4,
        menuName: "How to use",
        icon: () => (
            <svg
                width="16"
                height="18"
                viewBox="0 0 16 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M15.75 12.375C15.75 13.1133 15.2578 13.7461 14.625 13.9922V16.3125H14.9062C15.3633 16.3125 15.75 16.6992 15.75 17.1562C15.75 17.6484 15.3633 18 14.9062 18H2.8125C1.23047 18 0 16.7695 0 15.1875V2.8125C0 1.26562 1.23047 0 2.8125 0H14.0625C14.9766 0 15.75 0.773438 15.75 1.6875V12.375ZM12.9375 16.3125V14.0625H2.8125C2.17969 14.0625 1.6875 14.5898 1.6875 15.1875C1.6875 15.8203 2.17969 16.3125 2.8125 16.3125H12.9375ZM14.0625 12.375V1.6875H2.8125C2.17969 1.6875 1.6875 2.21484 1.6875 2.8125V12.6211C2.00391 12.4805 2.39062 12.375 2.8125 12.375H14.0625ZM5.34375 5.625C4.85156 5.625 4.5 5.27344 4.5 4.78125C4.5 4.32422 4.85156 3.9375 5.34375 3.9375H11.5312C11.9883 3.9375 12.375 4.32422 12.375 4.78125C12.375 5.27344 11.9883 5.625 11.5312 5.625H5.34375ZM5.34375 8.4375C4.85156 8.4375 4.5 8.08594 4.5 7.59375C4.5 7.13672 4.85156 6.75 5.34375 6.75H11.5312C11.9883 6.75 12.375 7.13672 12.375 7.59375C12.375 8.08594 11.9883 8.4375 11.5312 8.4375H5.34375Z"
                    fill="#414651"
                />
            </svg>
        ),
    },
    {
        id: 5,
        menuName: "Setting",
        icon: () => (
            <svg
                width="18"
                height="18"
                viewBox="0 0 18 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M5.31586 9C5.31586 7.13672 6.79242 5.625 8.69086 5.625C10.5541 5.625 12.0659 7.13672 12.0659 9C12.0659 10.8633 10.5541 12.375 8.69086 12.375C6.79242 12.375 5.31586 10.8633 5.31586 9ZM8.69086 7.3125C7.74164 7.3125 7.00336 8.08594 7.00336 9C7.00336 9.94922 7.74164 10.6875 8.69086 10.6875C9.60492 10.6875 10.3784 9.94922 10.3784 9C10.3784 8.08594 9.60492 7.3125 8.69086 7.3125ZM9.99164 0C10.7651 0 11.433 0.5625 11.6088 1.30078L11.8901 2.46094C12.2065 2.60156 12.4877 2.77734 12.7338 2.95312L13.894 2.60156C14.6323 2.39062 15.4409 2.70703 15.8276 3.375L17.1284 5.66016C17.5151 6.32812 17.3745 7.17188 16.812 7.69922L15.9682 8.50781C15.9682 8.68359 16.0034 8.85938 16.0034 9C16.0034 9.17578 15.9682 9.35156 15.9682 9.49219L16.812 10.3359C17.3745 10.8633 17.5151 11.707 17.1284 12.375L15.8276 14.6602C15.4409 15.3281 14.6323 15.6445 13.894 15.4336L12.7338 15.082C12.4877 15.2578 12.2065 15.4336 11.8901 15.5742L11.6088 16.7344C11.433 17.4727 10.7651 18 9.99164 18H7.35492C6.58148 18 5.91352 17.4727 5.73773 16.7344L5.45648 15.5742C5.14008 15.4336 4.85883 15.2578 4.61273 15.082L3.45258 15.4336C2.7143 15.6445 1.9057 15.3281 1.51898 14.6602L0.218203 12.375C-0.168515 11.707 -0.0278903 10.8633 0.53461 10.3359L1.37836 9.49219C1.37836 9.35156 1.37836 9.17578 1.37836 9C1.37836 8.85938 1.37836 8.68359 1.37836 8.50781L0.53461 7.69922C-0.0278903 7.17188 -0.168515 6.32812 0.218203 5.66016L1.51898 3.375C1.9057 2.70703 2.7143 2.39062 3.45258 2.60156L4.61273 2.95312C4.85883 2.77734 5.14008 2.60156 5.45648 2.46094L5.73773 1.30078C5.91352 0.5625 6.58148 0 7.35492 0H9.99164ZM6.89789 3.65625L6.51117 3.83203C6.05414 4.00781 5.63227 4.25391 5.2807 4.53516L4.92914 4.81641L2.99555 4.21875L1.69477 6.50391L3.13617 7.875L3.10102 8.29688C3.06586 8.54297 3.06586 8.78906 3.06586 9C3.06586 9.24609 3.06586 9.49219 3.10102 9.73828L3.13617 10.1602L1.69477 11.5312L2.99555 13.8164L4.92914 13.2188L5.2807 13.5C5.63227 13.7812 6.05414 14.0273 6.51117 14.2031L6.89789 14.3789L7.35492 16.3125H9.99164L10.4487 14.3789L10.8354 14.2031C11.2924 14.0273 11.7143 13.7812 12.0659 13.5L12.4174 13.2188L14.351 13.8164L15.6518 11.5312L14.2104 10.1602L14.2455 9.73828C14.2807 9.49219 14.3159 9.24609 14.3159 9C14.3159 8.78906 14.2807 8.54297 14.2455 8.29688L14.2104 7.875L15.6518 6.50391L14.351 4.21875L12.4174 4.81641L12.0659 4.53516C11.7143 4.25391 11.2924 4.00781 10.8354 3.83203L10.4487 3.65625L9.99164 1.6875H7.35492L6.89789 3.65625Z"
                    fill="#414651"
                />
            </svg>
        ),
    },
];

const Sidebar = () => {
    const [isActive, setIsActive] = useState(1);
    const [isMobile, setIsMobile] = useState(window.innerWidth <= 845);
    const handleActiveState = (id) => {
        setIsActive(isActive === id ? null : id);
    };

    useEffect(() => {
        const handleResize = () => {
            setIsMobile(window.innerWidth <= 845);
        };
        window.addEventListener("resize", handleResize);

        return () => {
            window.removeEventListener("resize", handleResize);
        };
    }, []);

    const [openMenu, setOpenMenu] = useState(false);

    const handleMenuOpen = () => {
        setOpenMenu((prev) => !prev);
    };

    return (
        <>
            {isMobile ? (
                <>
                    {/* Mobile sidebar */}
                    <div className="w-full bg-white relative z-20">
                        <div className="border-b flex items-center justify-between border px-5 py-4">
                            <div className="flex gap-3 items-center">
                                <img className="w-8 h-8" src={logo} alt="" />
                                <span className="text-xl">CodeAnt AI</span>
                            </div>
                            <img
                                onClick={handleMenuOpen}
                                className="w-4 h-4"
                                src={`${openMenu ? closemenu : menubar}`}
                                alt=""
                            />
                        </div>

                        <div className="absolute top-18 z-10 w-full">
                            {openMenu && (
                                <>
                                    <div className="w-full bg-white h-auto px-5 py-5">
                                        {/* Input */}
                                        <div className="w-full mt-5 border pl-4 rounded-md pr-2 flex justify-between items-center py-2">
                                            <p className="max-w-[160px] line-clamp-1">UtkarshDhairyaPanwar</p>
                                            <img className="w-3 h-2" src={chevrondown} alt="" />
                                        </div>
                                        {/* List of menu */}
                                        <div className="flex flex-col mt-5">
                                            {menuItem.map((menu) => (
                                                <div
                                                    key={menu.id}
                                                    className="flex text-sm gap-3 items-center py-2 rounded-md px-2 mb-2"
                                                >
                                                    {menu.icon()}
                                                    <span>{menu.menuName}</span>
                                                </div>
                                            ))}
                                        </div>
                                        {/* Menu-bottom */}
                                        <div className="flex flex-col">
                                            <div className="flex gap-3 items-center px-3 py-2">
                                                <svg
                                                    width="18"
                                                    height="18"
                                                    viewBox="0 0 18 18"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                >
                                                    <path
                                                        d="M16.875 11.2756C17.6836 11.6272 18.1406 12.5061 17.8945 13.385L17.1562 16.5842C17.0156 17.428 16.2773 17.9905 15.3984 17.9905C6.89062 17.9905 0 11.0999 0 2.59205C0 1.71315 0.5625 0.974864 1.40625 0.799083L4.60547 0.0608015C5.48438 -0.150136 6.36328 0.306895 6.71484 1.11549L8.22656 4.63111C8.54297 5.3694 8.29688 6.2483 7.69922 6.77565L6.50391 7.72486C7.41797 9.27174 8.71875 10.5725 10.3008 11.4866L11.25 10.3264C11.7773 9.69361 12.6562 9.44752 13.4297 9.79908L16.875 11.2756ZM16.2773 12.9983C16.3125 12.928 16.2773 12.8577 16.207 12.7874L12.7617 11.3108C12.6914 11.2756 12.6211 11.3108 12.5859 11.346L11.1797 13.0686C10.9336 13.385 10.4766 13.4553 10.125 13.2796C7.76953 12.1194 5.83594 10.1858 4.67578 7.83033C4.5 7.47877 4.60547 7.0569 4.88672 6.8108L6.60938 5.40455C6.67969 5.3694 6.67969 5.29908 6.64453 5.22877L5.16797 1.78346C5.13281 1.7483 5.09766 1.67799 5.02734 1.67799L4.99219 1.71315L1.79297 2.45143C1.72266 2.45143 1.65234 2.52174 1.65234 2.59205C1.65234 10.1506 7.83984 16.303 15.3984 16.303C15.4688 16.303 15.5391 16.2327 15.5391 16.1975L16.2773 12.9983Z"
                                                        fill="#414651"
                                                    />
                                                </svg>
                                                <span>Support</span>
                                            </div>
                                            <div className="flex gap-3 items-center px-3 py-2">
                                                <svg
                                                    width="18"
                                                    height="16"
                                                    viewBox="0 0 18 16"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                >
                                                    <path
                                                        d="M6.75 15.0312C6.75 15.5234 6.36328 15.875 5.90625 15.875H3.375C1.47656 15.875 0 14.3984 0 12.5V3.5C0 1.63672 1.47656 0.125 3.375 0.125H5.90625C6.36328 0.125 6.75 0.511719 6.75 0.96875C6.75 1.46094 6.36328 1.8125 5.90625 1.8125H3.375C2.42578 1.8125 1.6875 2.58594 1.6875 3.5V12.5C1.6875 13.4492 2.42578 14.1875 3.375 14.1875H5.90625C6.36328 14.1875 6.75 14.5742 6.75 15.0312ZM17.7539 7.4375L13.2891 2.65625C12.9727 2.30469 12.4453 2.30469 12.0938 2.62109C11.7422 2.9375 11.7422 3.46484 12.0586 3.81641L15.1875 7.15625H6.43359C5.97656 7.15625 5.625 7.54297 5.625 8C5.625 8.49219 5.97656 8.84375 6.43359 8.84375H15.1523L11.9883 12.2188C11.6719 12.5703 11.6719 13.0977 12.0234 13.4141C12.2344 13.5547 12.4453 13.625 12.6211 13.625C12.832 13.625 13.043 13.5547 13.2188 13.3789L17.6836 8.59766C18.0703 8.28125 18.0703 7.75391 17.7539 7.4375Z"
                                                        fill="#414651"
                                                    />
                                                </svg>
                                                <span>Logout</span>
                                            </div>
                                        </div>
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                    {openMenu && (
                        <div
                            className="fixed inset-0 bg-black bg-opacity-50 z-10"
                            onClick={handleMenuOpen}
                        ></div>
                    )}
                </>
            ) : (
                <>
                    {/* sidebar */}
                    <div className="max-w-[250px] w-full h-screen p-4 border-r bg-[#fff]">
                        {/* logo */}
                        <div className="flex gap-3 items-center">
                            <img src={logo} alt="" />
                            <span className="text-2xl">CodeAnt AI</span>
                        </div>
                        {/* input */}
                        <div className="w-full mt-5 border pl-4 pr-2 flex justify-between items-center py-2 ">
                            <p className="max-w-[160px] line-clamp-1">UtkarshDhairyaPanwar</p>
                            <img className="w-3 h-2" src={chevrondown} alt="" />
                        </div>
                        {/* List of menu */}

                        <div className="flex flex-col mt-5">
                            {menuItem.map((menu) => (
                                <div
                                    key={menu.id}
                                    onClick={() => handleActiveState(menu.id)}
                                    className={`flex text-sm gap-3 border items-center py-2 rounded-md px-2 mb-2 ${isActive === menu.id ? "bg-[#1570Ef] text-white" : ""
                                        }`}
                                >
                                    {menu.icon()}
                                    <span>{menu.menuName}</span>
                                </div>
                            ))}
                        </div>
                        {/* menu-bttom */}
                        <div className="flex flex-col mt-[60%]">
                            <div className="flex gap-3 items-center px-3 py-2">
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 18 18"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M16.875 11.2756C17.6836 11.6272 18.1406 12.5061 17.8945 13.385L17.1562 16.5842C17.0156 17.428 16.2773 17.9905 15.3984 17.9905C6.89062 17.9905 0 11.0999 0 2.59205C0 1.71315 0.5625 0.974864 1.40625 0.799083L4.60547 0.0608015C5.48438 -0.150136 6.36328 0.306895 6.71484 1.11549L8.22656 4.63111C8.54297 5.3694 8.29688 6.2483 7.69922 6.77565L6.50391 7.72486C7.41797 9.27174 8.71875 10.5725 10.3008 11.4866L11.25 10.3264C11.7773 9.69361 12.6562 9.44752 13.4297 9.79908L16.875 11.2756ZM16.2773 12.9983C16.3125 12.928 16.2773 12.8577 16.207 12.7874L12.7617 11.3108C12.6914 11.2756 12.6211 11.3108 12.5859 11.346L11.1797 13.0686C10.9336 13.385 10.4766 13.4553 10.125 13.2796C7.76953 12.1194 5.83594 10.1858 4.67578 7.83033C4.5 7.47877 4.60547 7.0569 4.88672 6.8108L6.60938 5.40455C6.67969 5.3694 6.67969 5.29908 6.64453 5.22877L5.16797 1.78346C5.13281 1.7483 5.09766 1.67799 5.02734 1.67799L4.99219 1.71315L1.79297 2.45143C1.72266 2.45143 1.65234 2.52174 1.65234 2.59205C1.65234 10.1506 7.83984 16.303 15.3984 16.303C15.4688 16.303 15.5391 16.2327 15.5391 16.1975L16.2773 12.9983Z"
                                        fill="#414651"
                                    />
                                </svg>
                                <span>Support</span>
                            </div>
                            <div className="flex gap-3 items-center px-3 py-2">
                                <svg
                                    width="18"
                                    height="16"
                                    viewBox="0 0 18 16"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M6.75 15.0312C6.75 15.5234 6.36328 15.875 5.90625 15.875H3.375C1.47656 15.875 0 14.3984 0 12.5V3.5C0 1.63672 1.47656 0.125 3.375 0.125H5.90625C6.36328 0.125 6.75 0.511719 6.75 0.96875C6.75 1.46094 6.36328 1.8125 5.90625 1.8125H3.375C2.42578 1.8125 1.6875 2.58594 1.6875 3.5V12.5C1.6875 13.4492 2.42578 14.1875 3.375 14.1875H5.90625C6.36328 14.1875 6.75 14.5742 6.75 15.0312ZM17.7539 7.4375L13.2891 2.65625C12.9727 2.30469 12.4453 2.30469 12.0938 2.62109C11.7422 2.9375 11.7422 3.46484 12.0586 3.81641L15.1875 7.15625H6.43359C5.97656 7.15625 5.625 7.54297 5.625 8C5.625 8.49219 5.97656 8.84375 6.43359 8.84375H15.1523L11.9883 12.2188C11.6719 12.5703 11.6719 13.0977 12.0234 13.4141C12.2344 13.5547 12.4453 13.625 12.6211 13.625C12.832 13.625 13.043 13.5547 13.2188 13.3789L17.6836 8.59766C18.0703 8.28125 18.0703 7.75391 17.7539 7.4375Z"
                                        fill="#414651"
                                    />
                                </svg>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                </>
            )}
        </>
    );
};

export default Sidebar;
